<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HASFactura - Sistema de Facturación</title>
    <!-- Carga Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body class="flex h-screen overflow-hidden">

    <!-- ===== BARRA LATERAL (SIDEBAR) ===== -->
    <aside id="sidebar" class="w-64 bg-gray-800 text-gray-200 flex flex-col" style="height: 100vh; position: fixed; top: 0; left: 0; z-index: 40;">
        <div class="px-6 py-5">
            <h1 id="sidebar-title" class="text-2xl font-bold text-white">HASFactura</h1>
        </div>
        <nav class="flex-1 px-4 py-2 space-y-2 overflow-y-auto">
            <ul class="space-y-2">
                <li>
                    <a href="#" class="nav-link flex items-center px-4 py-3 rounded-lg hover:bg-gray-700 justify-start" data-page="dashboard">
                        <svg class="w-5 h-5 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25A2.25 2.25 0 0113.5 8.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" /></svg>
                        <span class="nav-text">Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="nav-link flex items-center px-4 py-3 rounded-lg hover:bg-gray-700 justify-start" data-page="facturacion">
                        <svg class="w-5 h-5 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" /></svg>
                        <span class="nav-text">Facturación</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="nav-link flex items-center px-4 py-3 rounded-lg hover:bg-gray-700 justify-start" data-page="clientes">
                        <svg class="w-5 h-5 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" /></svg>
                        <span class="nav-text">Clientes</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="nav-link flex items-center px-4 py-3 rounded-lg hover:bg-gray-700 justify-start" data-page="productos">
                        <svg class="w-5 h-5 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9" /></svg>
                        <span class="nav-text">Productos</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="nav-link flex items-center px-4 py-3 rounded-lg hover:bg-gray-700 justify-start" data-page="documentos">
                        <svg class="w-5 h-5 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" /></svg>
                        <span class="nav-text">Documentos</span>
                    </a>
                </li>
                <!-- Nuevos links -->
                <li>
                    <a href="#" class="nav-link flex items-center px-4 py-3 rounded-lg hover:bg-gray-700 justify-start" data-page="contable">
                        <svg class="w-5 h-5 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" ><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 14.15v4.05a2.25 2.25 0 01-2.25 2.25h-13.5a2.25 2.25 0 01-2.25-2.25v-4.05M20.25 14.15v-4.05a2.25 2.25 0 00-2.25-2.25h-13.5a2.25 2.25 0 00-2.25 2.25v4.05m18-4.05v-4.05a2.25 2.25 0 00-2.25-2.25h-13.5a2.25 2.25 0 00-2.25 2.25v4.05m18 0v4.05a2.25 2.25 0 01-2.25 2.25h-13.5a2.25 2.25 0 01-2.25-2.25v-4.05m13.5 0v-4.05a2.25 2.25 0 00-2.25-2.25h-4.5a2.25 2.25 0 00-2.25 2.25v4.05m0 0v4.05a2.25 2.25 0 002.25 2.25h4.5a2.25 2.25 0 002.25-2.25v-4.05m-4.5 0h4.5" /></svg>
                        <span class="nav-text">Contable</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="nav-link flex items-center px-4 py-3 rounded-lg hover:bg-gray-700 justify-start" data-page="settings">
                        <svg class="w-5 h-5 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-1.007 1.11-1.227.55-.22 1.157-.14 1.65.23a1.99 1.99 0 01.99 1.51v.01c.02.47.22.92.56 1.25.34.33.82.52 1.32.52h.01c.5 0 1 .19 1.32.52.34.33.54.78.56 1.25v.01a1.99 1.99 0 01-.99 1.51c-.5.37-1.1.45-1.65.23-.55-.22-1.02-.68-1.11-1.227a1.99 1.99 0 00-1.98-1.51h-.01a1.99 1.99 0 00-1.98 1.51c-.09.542-.56 1.007-1.11 1.227-.55.22-1.157.14-1.65-.23a1.99 1.99 0 01-.99-1.51v-.01c-.02-.47-.22-.92-.56-1.25a1.32 1.32 0 01-1.32-.52h-.01c-.5 0-1-.19-1.32-.52a1.32 1.32 0 01-.56-1.25v-.01a1.99 1.99 0 01.99-1.51c.5-.37 1.1-.45 1.65-.23.55.22 1.02.68 1.11 1.227a1.99 1.99 0 001.98 1.51h.01a1.99 1.99 0 001.98-1.51zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z" /></svg>
                        <span class="nav-text">Settings</span>
                    </a>
                </li>
            </ul>
        </nav>
        <!-- Botón para colapsar ELIMINADO -->
    </aside>

    <!-- ===== CONTENIDO PRINCIPAL (MAIN) ===== -->
    <main class="flex-1 overflow-y-auto p-8 lg:p-10 ml-64" style="height: 100vh;">
        
        <!-- ===== PÁGINA: DASHBOARD (HUB) ===== -->
        <div id="page-dashboard" class="page-container">
            <!-- Encabezado -->
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                <h2 class="text-3xl font-bold text-gray-800 mb-4 sm:mb-0">Dashboard</h2>
            </div>
            
            <!-- KPIs (Indicadores Clave) -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500">
                    <h3 class="text-sm font-medium text-gray-500">Ingresos del Mes (Facturado)</h3>
                    <p class="text-3xl font-bold text-gray-800" id="kpi-ingresos">--</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-yellow-500">
                    <h3 class="text-sm font-medium text-gray-500">Cuentas por Cobrar (Pendiente)</h3>
                    <p class="text-3xl font-bold text-gray-800" id="kpi-por-cobrar">--</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-red-500">
                    <h3 class="text-sm font-medium text-gray-500">Egresos del Mes (Gastos)</h3>
                    <p class="text-3xl font-bold text-gray-800" id="kpi-egresos">--</p>
                </div>
            </div>

            <!-- Gráficos Principales -->
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-6 mb-8">
                <!-- Gráfico de Ingresos vs Egresos -->
                <div class="lg:col-span-3 bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Ingresos vs. Egresos (Últimos 6 Meses)</h3>
                    <div class="h-64">
                        <canvas id="salesChart"></canvas>
                    </div>
                </div>
                <!-- Estadísticas Clave -->
                <div class="lg:col-span-2 space-y-6">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">Mejor Cliente del Mes</h3>
                        <div class="flex items-center space-x-3">
                            <span class="flex items-center justify-center w-10 h-10 rounded-full bg-blue-100 text-blue-600 font-bold" id="mejor-cliente-inicial">--</span>
                            <div>
                                <p class="font-medium text-gray-800" id="mejor-cliente-nombre">--</p>
                                <p class="text-sm text-gray-500" id="mejor-cliente-total">--</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">Producto Más Vendido</h3>
                        <p class="font-medium text-gray-800" id="mejor-producto">--</p>
                        <p class="text-sm text-gray-500" id="mejor-producto-unidades">--</p>
                    </div>
                </div>
            </div>

            <!-- Gráfico de Tendencia y Facturas Recientes -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Gráfico de Tendencia Semanal -->
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Tendencia de Ventas (Últimas 4 Semanas)</h3>
                    <div class="h-64">
                        <canvas id="trendChart"></canvas>
                    </div>
                </div>
                
                <!-- Facturas Recientes -->
                <div class="bg-white rounded-lg shadow-md flex flex-col">
                    <h3 class="text-lg font-semibold text-gray-700 p-4">Facturas Recientes</h3>
                    <!-- Contenedor con scroll vertical -->
                    <div class="flex-grow overflow-y-auto" style="max-height: 250px;">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50 sticky top-0">
                                <tr>
                                    <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cliente</th>
                                    <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Monto</th>
                                    <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Estado</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200" id="recent-invoices-body">
                                <!-- Filas de facturas se insertarán aquí -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== PÁGINA: FACTURACIÓN ===== -->
        <div id="page-facturacion" class="page-container hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">Nueva Factura Electrónica</h2>
            <form id="invoice-form" class="space-y-8">
                
                <!-- Sección Cliente -->
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-gray-700 mb-4">1. Cliente</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="invoice-client" class="block text-sm font-medium text-gray-700">Seleccionar Cliente</label>
                            <div class="flex space-x-2">
                                <select id="invoice-client" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                    <option value="">Seleccione un cliente...</option>
                                </select>
                                <button type="button" id="add-client-btn" class="mt-1 px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center">
                                    <svg class="w-4 h-4 mr-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
                                    Agregar
                                </button>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Información</label>
                            <div id="client-info" class="mt-1 p-3 bg-gray-50 rounded-md min-h-[42px] text-sm text-gray-600">
                                <!-- Info del cliente aparecerá aquí -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sección Líneas de Factura -->
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-gray-700 mb-4">2. Productos / Servicios</h3>
                    <div class="space-y-4">
                        <!-- Contenedor de líneas de factura -->
                        <div id="invoice-items-container" class="space-y-3">
                            <!-- La primera línea se agrega por JS -->
                        </div>
                        <!-- Botón para agregar línea -->
                        <button type="button" id="add-invoice-item" class="text-blue-600 hover:text-blue-800 font-medium text-sm flex items-center">
                            <svg class="w-4 h-4 mr-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
                            Agregar Línea
                        </button>
                    </div>
                </div>

                <!-- Sección Totales y Envío -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Totales -->
                    <div class="md:col-span-2 bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-semibold text-gray-700 mb-4">3. Totales</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between text-gray-600">
                                <span>Subtotal:</span>
                                <span id="total-subtotal">₡0.00</span>
                            </div>
                            <div class="flex justify-between text-gray-600">
                                <span>IVA (13%):</span>
                                <span id="total-iva">₡0.00</span>
                            </div>
                            <div class="flex justify-between text-2xl font-bold text-gray-800 border-t pt-3">
                                <span>Total:</span>
                                <span id="total-general">₡0.00</span>
                            </div>
                        </div>
                    </div>
                    <!-- Acciones -->
                    <div class="bg-white p-6 rounded-lg shadow-md flex flex-col justify-between">
                        <h3 class="text-xl font-semibold text-gray-700 mb-4">4. Enviar</h3>
                        <div class="space-y-3">
                            <button type="button" id="send-proforma-btn" class="w-full bg-green-600 text-white px-4 py-3 rounded-lg shadow-md font-semibold hover:bg-green-700 transition-colors flex items-center justify-center">
                                <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                                Crear Proforma
                            </button>
                            <button type="submit" id="send-invoice-btn" class="w-full bg-blue-600 text-white px-4 py-3 rounded-lg shadow-md font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center">
                                <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.875L6 12z" /></svg>
                                Enviar a Hacienda
                            </button>
                            <button type="button" id="save-draft-btn" class="w-full bg-gray-200 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-300 transition-colors">
                                Guardar Borrador
                            </button>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <!-- ===== PÁGINA: CLIENTES ===== -->
        <div id="page-clientes" class="page-container hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">Gestión de Clientes</h2>
            <div class="bg-white p-8 rounded-lg shadow-md">
                <!-- Barra de herramientas -->
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 space-y-4 sm:space-y-0">
                    <button id="add-client-page-btn" class="flex items-center bg-green-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-green-700 transition-colors">
                        <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
                        Agregar Nuevo Cliente
                    </button>
                    <div class="w-full sm:w-64">
                        <input type="text" id="client-search" placeholder="Buscar por nombre o cédula..." class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                    </div>
                </div>
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nombre</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cédula</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Correo</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Teléfono</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200" id="clientes-table-body">
                        <!-- Los datos se insertarán aquí desde la DB simulada -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ===== PÁGINA: PRODUCTOS ===== -->
        <div id="page-productos" class="page-container hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">Gestión de Productos y Servicios</h2>
            <div class="bg-white p-8 rounded-lg shadow-md">
                <!-- Tiles de Categorías -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6" id="product-category-tiles">
                    <div class="category-tile active" data-category="Todos">
                        <h3 class="text-md font-semibold text-gray-700 text-center">Todos</h3>
                    </div>
                    <div class="category-tile" data-category="Celulares">
                        <h3 class="text-md font-semibold text-gray-700 text-center">Celulares</h3>
                    </div>
                    <div class="category-tile" data-category="Accesorios">
                        <h3 class="text-md font-semibold text-gray-700 text-center">Accesorios</h3>
                    </div>
                    <div class="category-tile" data-category="Reparaciones">
                        <h3 class="text-md font-semibold text-gray-700 text-center">Reparaciones</h3>
                    </div>
                </div>

                <!-- Barra de Búsqueda y Acciones -->
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 space-y-4 sm:space-y-0">
                    <div class="w-full sm:w-72">
                        <input type="text" id="product-search" placeholder="Buscar por nombre de producto..." class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                    </div>
                     <button id="add-product-btn" class="flex items-center bg-green-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-green-700 transition-colors">
                         <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
                         Agregar Producto
                     </button>
                </div>
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nombre</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Categoría</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Precio</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">CABYS</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">IVA</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200" id="productos-table-body">
                        <!-- Los datos se insertarán aquí desde la DB simulada -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- ===== PÁGINA: EGRESOS ===== -->
        <div id="page-egresos" class="page-container hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">Gestión de Egresos (Gastos)</h2>
            <div class="bg-white p-8 rounded-lg shadow-md">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fecha</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Proveedor</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Concepto</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Monto</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200" id="egresos-table-body">
                        <!-- Los datos se insertarán aquí desde la DB simulada -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ===== PÁGINA: DOCUMENTOS ===== -->
        <div id="page-documentos" class="page-container hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">Documentos</h2>
            
            <!-- Tiles de Tipos de Documentos -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer documento-tile" data-tipo="emitidos">
                    <div class="flex items-center justify-center mb-4">
                        <svg class="w-12 h-12 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" /></svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-700 text-center">Emitidos</h3>
                    <p class="text-sm text-gray-500 text-center mt-2">Facturas electrónicas emitidas</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer documento-tile" data-tipo="proformas">
                    <div class="flex items-center justify-center mb-4">
                        <svg class="w-12 h-12 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-700 text-center">Proformas</h3>
                    <p class="text-sm text-gray-500 text-center mt-2">Cotizaciones y presupuestos</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer documento-tile" data-tipo="descargar">
                    <div class="flex items-center justify-center mb-4">
                        <svg class="w-12 h-12 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-700 text-center">Descargar Documentos</h3>
                    <p class="text-sm text-gray-500 text-center mt-2">Exportar por fechas</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer documento-tile" data-tipo="migracion">
                    <div class="flex items-center justify-center mb-4">
                        <svg class="w-12 h-12 text-orange-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-16.5 3.75H3m18 0h-1.5M8.25 19.5v1.5m7.5-1.5v1.5m-7.5-7.5h1.5m5.25 0h1.5m-1.5-6h1.5m-7.5 6h1.5M12 4.5a7.5 7.5 0 100 15 7.5 7.5 0 000-15z" /></svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-700 text-center">Migración</h3>
                    <p class="text-sm text-gray-500 text-center mt-2">Transferencia de datos</p>
                </div>
            </div>
            
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-gray-700 mb-4" id="documentos-titulo">Selecciona un tipo de documento</h3>
                    <div id="documentos-contenido">
                        <p class="text-gray-500">Haz click en uno de los tiles arriba para ver la información correspondiente.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== PÁGINA: REPORTES (NUEVA) ===== -->
        <div id="page-reportes" class="page-container hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">Reportes y Analytics</h2>

            <!-- Gráficos de Ventas -->
            <div class="bg-white p-6 rounded-lg shadow-md mb-8">
                <h3 class="text-xl font-semibold text-gray-700 mb-4">Gráficos de Ventas</h3>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div>
                        <label for="sales-chart-filter" class="block text-sm font-medium text-gray-700 mb-2">Filtrar por:</label>
                        <select id="sales-chart-filter" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            <option value="monthly">Ventas por Mes</option>
                            <option value="quarterly">Ventas por Trimestre</option>
                        </select>
                    </div>
                    <div class="h-64">
                        <canvas id="salesReportChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Reportes de Productos y Rentabilidad -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-gray-700 mb-4">Productos Más Vendidos</h3>
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Producto</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Unidades</th>
                            </tr>
                        </thead>
                        <tbody id="best-selling-products-table">
                            <!-- Data se insertará aquí -->
                        </tbody>
                    </table>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-gray-700 mb-4">Análisis de Rentabilidad</h3>
                     <div class="h-64">
                        <canvas id="profitabilityChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Exportar y AI Insights -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-gray-700 mb-4">Exportar Reportes</h3>
                    <div class="flex space-x-4">
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center">
                            <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m.75 12h7.5" /></svg>
                            Exportar a PDF
                        </button>
                        <button class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center">
                            <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m.75 12h7.5" /></svg>
                            Exportar a Excel
                        </button>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-gray-700 mb-4">Análisis con IA</h3>
                    <p class="text-gray-600">Aquí se mostrarán datos generados por IA relevantes para el manejo del negocio.</p>
                    <button class="mt-4 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700">Generar Análisis</button>
                </div>
            </div>
        </div>

        <!-- ===== PÁGINA: CONTABLE (REPORTES) ===== -->
        <div id="page-contable" class="page-container hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">Sistema de Reportes Contables</h2>

            <!-- Filtros de Fecha -->
            <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                <h3 class="text-lg font-semibold text-gray-700 mb-4">Filtros de Período</h3>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Desde</label>
                        <input type="date" id="report-date-from" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Hasta</label>
                        <input type="date" id="report-date-to" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Tipo de Reporte</label>
                        <select id="report-type" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            <option value="ingresos-egresos">Ingresos vs Egresos</option>
                            <option value="clientes">Análisis de Clientes</option>
                            <option value="productos">Análisis de Productos</option>
                            <option value="iva">Reporte de IVA</option>
                            <option value="balance">Balance General</option>
                            <option value="estado-resultados">Estado de Resultados</option>
                        </select>
                    </div>
                    <div class="flex items-end">
                        <button id="generate-report-btn" class="w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
                            Generar Reporte
                        </button>
                    </div>
                </div>
            </div>

            <!-- Contenedor de Reportes -->
            <div id="reports-container">

                <!-- Reporte por defecto: Ingresos vs Egresos -->
                <div id="report-ingresos-egresos" class="report-section">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <!-- Gráfico de Ingresos vs Egresos -->
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-semibold text-gray-700 mb-4">Ingresos vs Egresos</h3>
                            <div class="h-64">
                                <canvas id="report-income-expense-chart"></canvas>
                            </div>
                        </div>

                        <!-- Resumen Financiero -->
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-semibold text-gray-700 mb-4">Resumen del Período</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center p-3 bg-green-50 rounded-lg">
                                    <span class="text-green-700 font-medium">Total Ingresos</span>
                                    <span class="text-green-700 font-bold text-lg" id="report-total-ingresos">₡0.00</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-red-50 rounded-lg">
                                    <span class="text-red-700 font-medium">Total Egresos</span>
                                    <span class="text-red-700 font-bold text-lg" id="report-total-egresos">₡0.00</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-blue-50 rounded-lg border-t-2 border-blue-200">
                                    <span class="text-blue-700 font-medium">Utilidad Neta</span>
                                    <span class="text-blue-700 font-bold text-xl" id="report-utilidad-neta">₡0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tabla Detallada -->
                    <div class="bg-white rounded-lg shadow-md">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-700">Detalle por Meses</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mes</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ingresos</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Egresos</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Utilidad</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Margen (%)</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200" id="report-income-expense-table">
                                    <!-- Filas se generarán dinámicamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Reporte de Clientes -->
                <div id="report-clientes" class="report-section hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <!-- Top Clientes por Facturación -->
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-semibold text-gray-700 mb-4">Top 5 Clientes</h3>
                            <div class="space-y-3" id="report-top-clientes">
                                <!-- Se generará dinámicamente -->
                            </div>
                        </div>

                        <!-- Estado de Cuentas por Cobrar -->
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-semibold text-gray-700 mb-4">Estado de Cuentas por Cobrar</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Al día</span>
                                    <span class="font-semibold text-green-600" id="report-cuentas-al-dia">₡0.00</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">1-30 días</span>
                                    <span class="font-semibold text-yellow-600" id="report-cuentas-1-30">₡0.00</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">31-60 días</span>
                                    <span class="font-semibold text-orange-600" id="report-cuentas-31-60">₡0.00</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">+60 días</span>
                                    <span class="font-semibold text-red-600" id="report-cuentas-60-mas">₡0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tabla de Clientes -->
                    <div class="bg-white rounded-lg shadow-md">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-700">Detalle de Clientes</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cliente</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Facturado</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Pagado</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Pendiente</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">% del Total</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200" id="report-clientes-table">
                                    <!-- Filas se generarán dinámicamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Reporte de Productos -->
                <div id="report-productos" class="report-section hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <!-- Top Productos -->
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-semibold text-gray-700 mb-4">Productos Más Vendidos</h3>
                            <div class="space-y-3" id="report-top-productos">
                                <!-- Se generará dinámicamente -->
                            </div>
                        </div>

                        <!-- Estadísticas de Productos -->
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-semibold text-gray-700 mb-4">Estadísticas</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Total Productos</span>
                                    <span class="font-semibold" id="report-total-productos">0</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Unidades Vendidas</span>
                                    <span class="font-semibold" id="report-total-unidades">0</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Producto Más Vendido</span>
                                    <span class="font-semibold text-blue-600" id="report-producto-top">--</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tabla de Productos -->
                    <div class="bg-white rounded-lg shadow-md">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-700">Detalle de Productos</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Producto</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Precio Unit.</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Unidades</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total Vendido</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">% del Total</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200" id="report-productos-table">
                                    <!-- Filas se generarán dinámicamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Reporte de IVA -->
                <div id="report-iva" class="report-section hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                        <!-- Resumen IVA -->
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-semibold text-gray-700 mb-4">Resumen IVA</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">IVA Cobrado</span>
                                    <span class="font-semibold text-green-600" id="report-iva-cobrado">₡0.00</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">IVA Pagado</span>
                                    <span class="font-semibold text-red-600" id="report-iva-pagado">₡0.00</span>
                                </div>
                                <div class="flex justify-between items-center border-t pt-2">
                                    <span class="text-gray-600">Saldo IVA</span>
                                    <span class="font-semibold text-blue-600" id="report-iva-saldo">₡0.00</span>
                                </div>
                            </div>
                        </div>

                        <!-- Gráfico de IVA -->
                        <div class="bg-white p-6 rounded-lg shadow-md lg:col-span-2">
                            <h3 class="text-lg font-semibold text-gray-700 mb-4">IVA por Mes</h3>
                            <div class="h-64">
                                <canvas id="report-iva-chart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Detalle IVA -->
                    <div class="bg-white rounded-lg shadow-md">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-700">Detalle IVA por Período</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Período</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Base Imponible</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">IVA 13%</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">IVA 0%</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total IVA</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200" id="report-iva-table">
                                    <!-- Filas se generarán dinámicamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Balance General -->
                <div id="report-balance" class="report-section hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Activo -->
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-semibold text-gray-700 mb-4">Activo</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center py-2 border-b">
                                    <span class="text-gray-600">Caja y Bancos</span>
                                    <span class="font-semibold" id="balance-caja">₡0.00</span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b">
                                    <span class="text-gray-600">Cuentas por Cobrar</span>
                                    <span class="font-semibold" id="balance-cuentas-cobrar">₡0.00</span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b">
                                    <span class="text-gray-600">Inventario</span>
                                    <span class="font-semibold" id="balance-inventario">₡0.00</span>
                                </div>
                                <div class="flex justify-between items-center py-2 font-bold text-lg border-t-2">
                                    <span>Total Activo</span>
                                    <span id="balance-total-activo">₡0.00</span>
                                </div>
                            </div>
                        </div>

                        <!-- Pasivo + Patrimonio -->
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-semibold text-gray-700 mb-4">Pasivo y Patrimonio</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center py-2 border-b">
                                    <span class="text-gray-600">Cuentas por Pagar</span>
                                    <span class="font-semibold" id="balance-cuentas-pagar">₡0.00</span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b">
                                    <span class="text-gray-600">Préstamos</span>
                                    <span class="font-semibold" id="balance-prestamos">₡0.00</span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b">
                                    <span class="text-gray-600">Capital Social</span>
                                    <span class="font-semibold" id="balance-capital">₡0.00</span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b">
                                    <span class="text-gray-600">Utilidades Acumuladas</span>
                                    <span class="font-semibold" id="balance-utilidades">₡0.00</span>
                                </div>
                                <div class="flex justify-between items-center py-2 font-bold text-lg border-t-2">
                                    <span>Total Pasivo + Patrimonio</span>
                                    <span id="balance-total-pasivo">₡0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Estado de Resultados -->
                <div id="report-estado-resultados" class="report-section hidden">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold text-gray-700 mb-6">Estado de Resultados</h3>
                        <div class="max-w-2xl mx-auto">
                            <div class="space-y-4">
                                <!-- Ingresos -->
                                <div class="border-b-2 border-gray-200 pb-4">
                                    <h4 class="font-semibold text-gray-700 mb-3">Ingresos</h4>
                                    <div class="flex justify-between items-center py-2">
                                        <span class="text-gray-600">Ventas de Productos/Servicios</span>
                                        <span class="font-semibold" id="estado-ventas">₡0.00</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2 font-bold text-lg">
                                        <span>Total Ingresos</span>
                                        <span id="estado-total-ingresos">₡0.00</span>
                                    </div>
                                </div>

                                <!-- Costos y Gastos -->
                                <div class="border-b-2 border-gray-200 pb-4">
                                    <h4 class="font-semibold text-gray-700 mb-3">Costos y Gastos</h4>
                                    <div class="flex justify-between items-center py-2">
                                        <span class="text-gray-600">Costo de Ventas</span>
                                        <span class="font-semibold" id="estado-costo-ventas">₡0.00</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2">
                                        <span class="text-gray-600">Gastos Operativos</span>
                                        <span class="font-semibold" id="estado-gastos-operativos">₡0.00</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2">
                                        <span class="text-gray-600">Gastos Administrativos</span>
                                        <span class="font-semibold" id="estado-gastos-admin">₡0.00</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2 font-bold">
                                        <span>Total Costos y Gastos</span>
                                        <span id="estado-total-costos">₡0.00</span>
                                    </div>
                                </div>

                                <!-- Utilidad -->
                                <div class="pt-4">
                                    <div class="flex justify-between items-center py-3 text-xl font-bold text-blue-600 border-t-2 border-blue-200">
                                        <span>Utilidad Neta del Período</span>
                                        <span id="estado-utilidad-neta">₡0.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Botones de Exportación -->
            <div class="mt-6 flex justify-end space-x-3">
                <button id="export-pdf-btn" class="bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                    Exportar PDF
                </button>
                <button id="export-excel-btn" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                    Exportar Excel
                </button>
            </div>
        </div>

        <!-- ===== PÁGINA: SETTINGS (NUEVA) ===== -->
        <div id="page-settings" class="page-container hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">Configuración</h2>
            <div class="bg-white p-10 rounded-lg shadow-md text-center">
                <h3 class="text-xl font-semibold text-gray-700">Próximamente</h3>
                <p class="text-gray-500 mt-2">Aquí irán los datos de la empresa, configuración de impuestos, usuarios y más.</p>
            </div>
        </div>

    </main>

    <!-- ===== MODAL DE NOTIFICACIÓN ===== -->
    <div id="notification-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4">
            <h3 id="notification-title" class="text-lg font-medium text-gray-900">Notificación</h3>
            <div class="mt-2">
                <p id="notification-message" class="text-sm text-gray-500">Mensaje.</p>
            </div>
            <div id="notification-spinner" class="hidden my-4 text-center">
                <div class="inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-blue-500 border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]" role="status">
                    <span class="!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]">Cargando...</span>
                </div>
            </div>
            <div class="mt-4 text-right">
                <button id="notification-close-btn" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">
                    Cerrar
                </button>
            </div>
        </div>
    </div>

    <!-- ===== MODAL AGREGAR CLIENTE ===== -->
    <div id="add-client-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-medium text-gray-900">Agregar Nuevo Cliente</h3>
                <button id="add-client-close-btn" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <form id="add-client-form" class="space-y-4">
                <div>
                    <label for="client-nombre" class="block text-sm font-medium text-gray-700">Nombre Completo</label>
                    <input type="text" id="client-nombre" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                </div>
                <div>
                    <label for="client-cedula" class="block text-sm font-medium text-gray-700">Cédula</label>
                    <input type="text" id="client-cedula" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                </div>
                <div>
                    <label for="client-email" class="block text-sm font-medium text-gray-700">Correo Electrónico</label>
                    <input type="email" id="client-email" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                </div>
                <div>
                    <label for="client-telefono" class="block text-sm font-medium text-gray-700">Teléfono</label>
                    <input type="tel" id="client-telefono" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                </div>
                <div class="flex justify-end space-x-3">
                    <button type="button" id="add-client-cancel-btn" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors">
                        Cancelar
                    </button>
                    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
                        Guardar Cliente
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- ===== MODAL AGREGAR PRODUCTO ===== -->
    <div id="add-product-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-medium text-gray-900">Agregar Nuevo Producto</h3>
                <button id="add-product-close-btn" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <form id="add-product-form" class="space-y-4">
                <div>
                    <label for="product-nombre" class="block text-sm font-medium text-gray-700">Nombre del Producto/Servicio</label>
                    <input type="text" id="product-nombre" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                </div>
                <div>
                    <label for="product-precio" class="block text-sm font-medium text-gray-700">Precio</label>
                    <input type="number" id="product-precio" step="0.01" min="0" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                </div>
                <div>
                    <label for="product-cabys" class="block text-sm font-medium text-gray-700">Código CABYS</label>
                    <input type="text" id="product-cabys" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                </div>
                <div>
                    <label for="product-iva" class="block text-sm font-medium text-gray-700">IVA (%)</label>
                    <select id="product-iva" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                        <option value="0.13">13% (General)</option>
                        <option value="0.0">0% (Exento)</option>
                        <option value="0.04">4% (Reducido)</option>
                    </select>
                </div>
                <div class="flex justify-end space-x-3">
                    <button type="button" id="add-product-cancel-btn" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors">
                        Cancelar
                    </button>
                    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
                        Guardar Producto
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- ===== MODAL EDITAR PRODUCTO ===== -->
    <div id="edit-product-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-medium text-gray-900">Editar Producto</h3>
                <button id="edit-product-close-btn" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <form id="edit-product-form" class="space-y-4">
                <input type="hidden" id="edit-product-id">
                <div>
                    <label for="edit-product-nombre" class="block text-sm font-medium text-gray-700">Nombre del Producto/Servicio</label>
                    <input type="text" id="edit-product-nombre" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                </div>
                <div>
                    <label for="edit-product-precio" class="block text-sm font-medium text-gray-700">Precio</label>
                    <input type="number" id="edit-product-precio" step="0.01" min="0" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                </div>
                <div>
                    <label for="edit-product-cabys" class="block text-sm font-medium text-gray-700">Código CABYS</label>
                    <input type="text" id="edit-product-cabys" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                </div>
                <div>
                    <label for="edit-product-iva" class="block text-sm font-medium text-gray-700">IVA (%)</label>
                    <select id="edit-product-iva" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                        <option value="0.13">13% (General)</option>
                        <option value="0.0">0% (Exento)</option>
                        <option value="0.04">4% (Reducido)</option>
                    </select>
                </div>
                <div class="flex justify-end space-x-3">
                    <button type="button" id="edit-product-cancel-btn" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors">
                        Cancelar
                    </button>
                    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
                        Actualizar Producto
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/main.js"></script>
</body>
</html>
